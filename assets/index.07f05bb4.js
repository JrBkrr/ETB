import{g as A}from"./assets.c6e05840.js";import{G as w}from"./global.0b0e94df.js";import{T as N}from"./TableSearch.ffb3b434.js";import{j as $,az as U,r as b,o as B,H as M,_ as k,m as f,n as e,B as n,F as V,p as O,z as g,A as u,v as _,w as d,a7 as R,y,aA as j,J as S,q as C}from"./index.8fb207d7.js";import{h as q}from"./moment.9709ab41.js";import{S as x}from"./sweetalert2.b7286a32.js";import{D as z}from"./DeviceCreate.d63b40ab.js";import{h as P}from"./dom.1a4b7804.js";const E=$({name:"DevicesTable",computed:{moment(){return q}},components:{TableSearch:N,KTIcon:U},props:{widgetClasses:String,item:Object},setup(t,{emit:o}){const{State:h,Action_Start:c}=w(),p=b({});B(async()=>{await c("get","devices","Devices")});const m=b(""),i=M(()=>h.Devices.filter(a=>a.serialNumber.includes(m.value)));return{getAssetPath:A,Target:p,SearchText:m,List:i,RemoveDevice:a=>{x.fire({text:`Are you sure you want to delete the device with serial number ${a}?`,icon:"warning",buttonsStyling:!1,confirmButtonText:"Yes, I am sure!",denyButtonText:"Cancel",showDenyButton:!0,heightAuto:!1,customClass:{confirmButton:"btn btn-primary",denyButton:"btn btn-secondary"}}).then(async r=>{r.isConfirmed?(await c("delete",`devices/delete?serialNumber=${a}`,""),await c("get","devices","Devices")):r.isDenied&&console.log("Reddedildi")})},UpdateEvent:a=>{o("update:item",a)}}}});const K={class:"card-header border-0 pt-5"},Y=e("h3",{class:"card-title align-items-start flex-column"},[e("span",{class:"card-label fw-bold fs-3 mb-1"},"Devices"),e("span",{class:"d-none text-muted mt-1 fw-semobold fs-7"},"Over 500 new products")],-1),F={class:"d-flex align-items-center justify-content-center"},G={class:"aside-search py-0 me-5"},L={class:"card-toolbar"},I={class:"btn btn-sm btn-icon btn-color-primary btn-active-primary border border-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_new_device"},H={class:"card-body py-3 h-100"},J={class:"table-responsive h-100"},Q={class:"table align-middle gs-0 gy-4"},W=e("thead",null,[e("tr",{class:"bg-light"},[e("th",{class:"ps-4 rounded-start"},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"#")]),e("th",{class:"min-w-125px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Gem No")]),e("th",{class:"min-w-125px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Series No")]),e("th",{class:"min-w-125px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Version")]),e("th",{class:"min-w-200px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Operating System version")]),e("th",{class:"min-w-150px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Fingerprint Success Rate")]),e("th",{class:"min-w-150px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Created")]),e("th",{class:"min-w-150px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Update")]),e("th",{class:"min-w-150px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Status")]),e("th",{class:"min-w-100 text-end rounded-end"})])],-1),X=["onMouseenter"],Z={class:"d-flex align-items-center"},ee={class:"symbol symbol-50px me-5"},te={class:"d-flex align-items-center"},se={class:"d-flex justify-content-start flex-column"},oe={href:"#",class:"text-dark text-hover-primary fw-bold mb-1 fs-6"},ae={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ne={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ie=e("span",{class:"text-muted fw-semobold text-muted d-block fs-7"},"Rejected",-1),le={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},re={class:"text-muted fw-semobold text-muted d-block fs-7"},de={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ce={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},me={class:"text-muted fw-semobold text-muted d-block fs-7"},ue={class:"d-flex justify-content-end"},be={href:"#",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"},pe=["onClick"],fe=["onClick"];function _e(t,o,h,c,p,m){const i=u("TableSearch"),l=u("KTIcon");return _(),f("div",{class:g([t.widgetClasses,"card h-100"])},[e("div",K,[Y,e("div",F,[e("div",G,[n(i,{payload:t.SearchText,"onUpdate:payload":o[0]||(o[0]=s=>t.SearchText=s)},null,8,["payload"])]),e("div",L,[e("button",I,[n(l,{"icon-name":"plus","icon-class":"fs-3"})])])])]),e("div",H,[e("div",J,[e("table",Q,[W,e("tbody",null,[(_(!0),f(V,null,O(t.List,(s,a)=>{var r,D,T;return _(),f("tr",{key:a,onMouseenter:v=>t.Target.id=s.id,onMouseleave:o[1]||(o[1]=v=>t.Target.id="")},[e("td",null,[e("div",Z,[e("div",ee,[e("a",{href:"#",class:g(["symbol-label me-1 fs-2 fw-bold",`bg-light-dark btn-active-color-${t.Target.id===s.id&&"primary"} text-${t.Target.id===s.id?"primary":"dark"}`])},d(a+1),3)])])]),e("td",null,[e("div",te,[e("div",se,[e("a",oe,d(s.gemNumber),1)])])]),e("td",null,[e("a",ae,d(s.serialNumber||"-"),1)]),e("td",null,[e("a",ne,d((r=s.version)==null?void 0:r.versionNumberSemantic),1),ie]),e("td",null,[e("a",le,d(s.operatingSystemVersion),1),e("span",re,d((D=s.hardwareVersion)==null?void 0:D.name),1)]),e("td",null,[e("a",de,d(((T=s.details.find(v=>v.name==="fingerprint_success_rate"))==null?void 0:T.value)||""),1)]),e("td",null,[e("a",ce,d(t.moment(s.createdAt).format("YYYY-MM-DD")),1),e("span",me,d(t.moment(s.createdAt).format("hh:mm:ss")),1)]),e("td",null,[e("span",{class:g(`
                      badge badge-light-${s.version.forceUpdate?"success":"primary"}
                      fs-7
                      fw-bold
                    `)},d(s.version.forceUpdate?"Active":"Passive"),3)]),e("td",null,[e("span",{class:g(`
                      badge badge-light-${s.online?"success":"primary"}
                      fs-7
                      fw-bold
                    `)},d(s.online?"Online":"Offline"),3)]),e("td",ue,[e("a",be,[n(l,{"icon-name":"switch","icon-class":"fs-3"})]),e("a",{onClick:v=>t.UpdateEvent(s),"data-bs-toggle":"modal","data-bs-target":"#kt_modal_update_device",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"},[n(l,{"icon-name":"pencil","icon-class":"fs-3"})],8,pe),e("a",{onClick:v=>t.RemoveDevice(s.serialNumber),class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm"},[n(l,{"icon-name":"trash","icon-class":"fs-3"})],8,fe)])],40,X)}),128))])])])])],2)}const he=k(E,[["render",_e]]),ve=$({name:"new-target-modal",components:{},props:{item:{type:Object,required:!0}},setup(t){const{Action_Start:o,State:h}=w(),c=b(null),p=b(null),m=b(!1),i=b({serialNumber:t.item.serialNumber,province:t.item.province,district:t.item.district,branch:t.item.branch}),l=b({province:[{required:!0,message:"Please select Activity zone",trigger:"change"}],district:[{required:!0,message:"Please select Activity zone",trigger:"change"}],branch:[{required:!0,message:"Please select Activity zone",trigger:"change"}]}),s=()=>{!c.value||c.value.validate(async a=>{if(a)m.value=!0,await o("put","devices/updateAddress","",i.value),h.Errors?(m.value=!1,x.fire({text:"Sorry, the operation could not be performed due to a service error. Contact the developer.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})):setTimeout(()=>{m.value=!1,x.fire({text:"Form has been successfully submitted!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(async()=>{await o("get","devices","Devices"),P(p.value)})},2e3);else return x.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})};return R(()=>t.item,a=>{a&&(i.value.serialNumber=a.serialNumber,i.value.province=a.province,i.value.district=a.district,i.value.branch=a.branch)}),{targetData:i,submit:s,loading:m,formRef:c,rules:l,newTargetModalRef:p,getAssetPath:A}}});const ge={class:"modal fade",id:"kt_modal_update_device",ref:"newTargetModalRef",tabindex:"-1","aria-hidden":"true"},ye={class:"modal-dialog modal-dialog-centered mw-650px"},xe={class:"modal-content rounded"},we={class:"modal-header pb-0 border-0 justify-content-end"},$e={class:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal"},ke={class:"modal-body scroll-y px-10 px-lg-15 pt-0 pb-15"},De=e("div",{class:"mb-13 text-center"},[e("h1",{class:"mb-3"},"Create New Version")],-1),Te={class:"d-flex flex-column mb-8 fv-row"},Se=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"province")],-1),Ce={class:"d-flex flex-column mb-8 fv-row"},Ae=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"district")],-1),Ve={class:"d-flex flex-column mb-8 fv-row"},Ne=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"branch")],-1),Ue={class:"text-center"},Be=e("button",{type:"reset",id:"kt_modal_update_target_cancel",class:"btn btn-light me-3"}," Cancel ",-1),Me=["data-kt-indicator"],Oe={key:0,class:"indicator-label"},Re={key:1,class:"indicator-progress"},je=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function qe(t,o,h,c,p,m){const i=u("KTIcon"),l=u("el-input"),s=u("el-form-item"),a=u("el-form");return _(),f("div",ge,[e("div",ye,[e("div",xe,[e("div",we,[e("div",$e,[n(i,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",ke,[n(a,{id:"kt_modal_new_target_form",onSubmit:o[3]||(o[3]=j(r=>t.submit(),["prevent"])),model:t.targetData,rules:t.rules,ref:"formRef",class:"form"},{default:y(()=>[De,e("div",Te,[Se,n(s,{prop:"province"},{default:y(()=>[n(l,{modelValue:t.targetData.province,"onUpdate:modelValue":o[0]||(o[0]=r=>t.targetData.province=r),placeholder:"province",name:"province"},null,8,["modelValue"])]),_:1})]),e("div",Ce,[Ae,n(s,{prop:"district"},{default:y(()=>[n(l,{modelValue:t.targetData.district,"onUpdate:modelValue":o[1]||(o[1]=r=>t.targetData.district=r),placeholder:"district",name:"district"},null,8,["modelValue"])]),_:1})]),e("div",Ve,[Ne,n(s,{prop:"branch"},{default:y(()=>[n(l,{modelValue:t.targetData.branch,"onUpdate:modelValue":o[2]||(o[2]=r=>t.targetData.branch=r),placeholder:"branch",name:"branch"},null,8,["modelValue"])]),_:1})]),e("div",Ue,[Be,e("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?C("",!0):(_(),f("span",Oe,[S(" Submit "),n(i,{"icon-name":"arrow-right","icon-class":"fs-3 ms-2 me-0"})])),t.loading?(_(),f("span",Re,[S(" Please wait... "),je])):C("",!0)],8,Me)])]),_:1},8,["model","rules"])])])])],512)}const ze=k(ve,[["render",qe]]),Pe=$({name:"dashboard-main",components:{DeviceCreate:z,DevicesTable:he,DeviceUpdate:ze},setup(){return w(),{item:b({})}}}),Ee={class:"row g-5 g-xl-8 h-100"};function Ke(t,o,h,c,p,m){const i=u("DevicesTable"),l=u("DeviceCreate"),s=u("DeviceUpdate");return _(),f(V,null,[e("div",Ee,[n(i,{page:"Devices",url:"devices",item:t.item,"onUpdate:item":o[0]||(o[0]=a=>t.item=a)},null,8,["item"])]),n(l),n(s,{item:t.item},null,8,["item"])],64)}const We=k(Pe,[["render",Ke]]);export{We as default};

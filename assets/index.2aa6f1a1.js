import{g as k}from"./assets.0d2645b5.js";import{G as C}from"./global.f6b8c10a.js";import{T as q}from"./TableSearch.9f423cc3.js";import{j as T,az as U,r as h,o as F,H as z,_ as S,m as g,n as e,B as s,F as A,p as M,z as $,A as i,v,w as _,y as r,aA as K,J as w,q as N}from"./index.eb7a7b4e.js";import{h as j}from"./dom.5a8a7328.js";import{S as V}from"./sweetalert2.2401e230.js";const R=T({name:"VersionsTable",components:{TableSearch:q,KTIcon:U},props:{widgetClasses:String},setup(){const{State:t,Action_Start:a}=C(),m=h({});F(async()=>{await a("get","versions","Versions")});const u=h(""),d=z(()=>t.Versions.filter(f=>f.versionNumber.toString().includes(u.value)));return{getAssetPath:k,Target:m,SearchText:u,List:d}}});const I={class:"card-header border-0 pt-5"},E=e("h3",{class:"card-title align-items-start flex-column"},[e("span",{class:"card-label fw-bold fs-3 mb-1"},"Versions"),e("span",{class:"d-none text-muted mt-1 fw-semobold fs-7"},"Over 500 new products")],-1),O={class:"d-flex align-items-center justify-content-center"},L={class:"aside-search py-0 me-5"},G={class:"card-toolbar"},H={class:"btn btn-sm btn-icon btn-color-primary btn-active-primary border border-primary","data-bs-toggle":"modal","data-bs-target":"#kt_modal_new_version"},J={class:"card-body py-3 h-100"},Q={class:"table-responsive h-100"},W={class:"table align-middle gs-0 gy-4"},X=e("thead",null,[e("tr",{class:"bg-light"},[e("th",{class:"ps-4 rounded-start"},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"#")]),e("th",{class:"min-w-125px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Version No")]),e("th",{class:"min-w-125px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Version Name")]),e("th",{class:"min-w-125px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Branch No")]),e("th",{class:"min-w-200px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Hardware Versions")]),e("th",{class:"min-w-150px",style:{"max-width":"10%"}},[e("span",{class:"text-dots text-muted fw-bold mt-1"},"Forced Update")]),e("th",{class:"min-w-100 text-end rounded-end"})])],-1),Y=["onMouseenter"],Z={class:"d-flex align-items-center"},ee={class:"symbol symbol-50px me-5"},te={class:"d-flex align-items-center"},se={class:"d-flex justify-content-start flex-column"},ae={href:"#",class:"text-dark text-hover-primary fw-bold mb-1 fs-6"},oe={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},ne=e("span",{class:"text-muted fw-semobold text-muted d-block fs-7"},"Paid",-1),le={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},re=e("span",{class:"text-muted fw-semobold text-muted d-block fs-7"},"Rejected",-1),ie={href:"#",class:"text-dark fw-bold text-hover-primary d-block mb-1 fs-6"},de={class:"text-muted fw-semobold text-muted d-block fs-7"},ce={class:"d-flex justify-content-end"},me={href:"#",class:"btn btn-icon btn-bg-light btn-active-color-primary btn-sm me-1"};function ue(t,a,m,u,d,f){const p=i("TableSearch"),c=i("KTIcon");return v(),g("div",{class:$([t.widgetClasses,"card h-100"])},[e("div",I,[E,e("div",O,[e("div",L,[s(p,{payload:t.SearchText,"onUpdate:payload":a[0]||(a[0]=o=>t.SearchText=o)},null,8,["payload"])]),e("div",G,[e("button",H,[s(c,{"icon-name":"plus","icon-class":"fs-3"})])])])]),e("div",J,[e("div",Q,[e("table",W,[X,e("tbody",null,[(v(!0),g(A,null,M(t.List,(o,l)=>{var y,b;return v(),g("tr",{key:l,onMouseenter:n=>t.Target.id=o.id,onMouseleave:a[1]||(a[1]=n=>t.Target.id="")},[e("td",null,[e("div",Z,[e("div",ee,[e("a",{href:"#",class:$(["symbol-label me-1 fs-2 fw-bold",`bg-light-dark btn-active-color-${t.Target.id===o.id&&"primary"} text-${t.Target.id===o.id?"primary":"dark"}`])},_(l+1),3)])])]),e("td",null,[e("div",te,[e("div",se,[e("a",ae,_(o.versionNumberSemantic),1)])])]),e("td",null,[e("a",oe,_(o.name||"-"),1),ne]),e("td",null,[e("a",le,_(o.deviceType),1),re]),e("td",null,[e("a",ie,_((y=o.hardwareVersions[0])==null?void 0:y.name),1),e("span",de,_(o.versionNumber),1)]),e("td",null,[e("span",{class:$(`
                      badge badge-light-${(b=o.status)==null?void 0:b.name}
                      fs-7
                      fw-bold
                    `)},_(o.forceUpdate?"Active":"Passive"),3)]),e("td",ce,[e("a",me,[s(c,{"icon-name":"switch","icon-class":"fs-3"})])])],40,Y)}),128))])])])])],2)}const fe=S(R,[["render",ue]]),pe=T({name:"new-target-modal",components:{},setup(){const{Action_Start:t,State:a}=C(),m=h(null),u=h(null),d=h(!1),f=h({versionName:"",versionNumber:"",deviceSerialNumber:"",deviceType:"",hardwareVersions:[],file:[]}),p=h({versionName:[{required:!0,message:"Please input Activity name",trigger:"blur"}],versionNumber:[{required:!0,message:"Please select Activity zone",trigger:"change"}],deviceSerialNumber:[{required:!0,message:"Please select Activity zone",trigger:"change"}],deviceType:[{required:!0,message:"Please select Activity zone",trigger:"change"}],hardwareVersions:[{required:!0,message:"Please select Activity zone",trigger:"change"}],file:[{required:!0,message:"Please select Activity zone",trigger:"change"}]});return{targetData:f,submit:()=>{!m.value||m.value.validate(async l=>{if(console.log("valid",l),l)d.value=!0,await t("post","versions","",f.value),a.Errors?(d.value=!1,V.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"error",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}})):setTimeout(()=>{d.value=!1,V.fire({text:"Form has been successfully submitted!",icon:"success",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}).then(async()=>{await t("get","versions","Versions"),j(u.value)})},2e3);else return V.fire({text:"Sorry, looks like there are some errors detected, please try again.",icon:"warning",buttonsStyling:!1,confirmButtonText:"Ok, got it!",heightAuto:!1,customClass:{confirmButton:"btn btn-primary"}}),!1})},loading:d,formRef:m,rules:p,newTargetModalRef:u,getAssetPath:k,handleFileChange:l=>{var n;const b=(n=l.target.files)==null?void 0:n[0];if(b){const x=new FileReader;x.onloadend=()=>{const D=x.result,B=new Uint8Array(D);f.value.file=Array.from(B,P=>"0x"+P.toString(16))},x.readAsArrayBuffer(b)}}}}});const be={class:"modal fade",id:"kt_modal_new_version",ref:"newTargetModalRef",tabindex:"-1","aria-hidden":"true"},_e={class:"modal-dialog modal-dialog-centered mw-650px"},he={class:"modal-content rounded"},ge={class:"modal-header pb-0 border-0 justify-content-end"},ve={class:"btn btn-sm btn-icon btn-active-color-primary","data-bs-dismiss":"modal"},ye={class:"modal-body scroll-y px-10 px-lg-15 pt-0 pb-15"},we=e("div",{class:"mb-13 text-center"},[e("h1",{class:"mb-3"},"Create New Version")],-1),xe={class:"d-flex flex-column mb-8 fv-row"},$e=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Version Name")],-1),Ve={class:"d-flex flex-column mb-8 fv-row"},Te=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Version Number")],-1),Se={class:"d-flex flex-column mb-8 fv-row"},Ne=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Device Serial Number")],-1),ke={class:"d-flex flex-column mb-8 fv-row"},Ce=e("label",{class:"required fs-6 fw-semobold mb-2"},"Device Type",-1),Ae={class:"d-flex flex-column mb-8 fv-row"},De=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Build Versions")],-1),Be={class:"d-flex flex-column mb-8 fv-row"},Pe=e("label",{class:"d-flex align-items-center fs-6 fw-semobold mb-2"},[e("span",{class:"required"},"Update Package")],-1),qe={class:"text-center"},Ue=e("button",{type:"reset",id:"kt_modal_new_target_cancel",class:"btn btn-light me-3"}," Cancel ",-1),Fe=["data-kt-indicator"],ze={key:0,class:"indicator-label"},Me={key:1,class:"indicator-progress"},Ke=e("span",{class:"spinner-border spinner-border-sm align-middle ms-2"},null,-1);function je(t,a,m,u,d,f){const p=i("KTIcon"),c=i("el-input"),o=i("el-form-item"),l=i("el-option"),y=i("el-select"),b=i("el-form");return v(),g("div",be,[e("div",_e,[e("div",he,[e("div",ge,[e("div",ve,[s(p,{"icon-name":"cross","icon-class":"fs-1"})])]),e("div",ye,[s(b,{id:"kt_modal_new_target_form",onSubmit:a[6]||(a[6]=K(n=>t.submit(),["prevent"])),model:t.targetData,rules:t.rules,ref:"formRef",class:"form"},{default:r(()=>[we,e("div",xe,[$e,s(o,{prop:"versionName"},{default:r(()=>[s(c,{modelValue:t.targetData.versionName,"onUpdate:modelValue":a[0]||(a[0]=n=>t.targetData.versionName=n),placeholder:"Version Name",name:"versionName"},null,8,["modelValue"])]),_:1})]),e("div",Ve,[Te,s(o,{prop:"versionNumber"},{default:r(()=>[s(c,{modelValue:t.targetData.versionNumber,"onUpdate:modelValue":a[1]||(a[1]=n=>t.targetData.versionNumber=n),placeholder:"Version Number",name:"versionNumber"},null,8,["modelValue"])]),_:1})]),e("div",Se,[Ne,s(o,{prop:"deviceSerialNumber"},{default:r(()=>[s(c,{modelValue:t.targetData.deviceSerialNumber,"onUpdate:modelValue":a[2]||(a[2]=n=>t.targetData.deviceSerialNumber=n),placeholder:"Device Serial Number",name:"deviceSerialNumber"},null,8,["modelValue"])]),_:1})]),e("div",ke,[Ce,s(o,{prop:"deviceType"},{default:r(()=>[s(y,{modelValue:t.targetData.deviceType,"onUpdate:modelValue":a[3]||(a[3]=n=>t.targetData.deviceType=n),placeholder:"Device Type",name:"deviceType",as:"select"},{default:r(()=>[s(l,{value:""},{default:r(()=>[w("Select type...")]),_:1}),s(l,{label:"Type 1",value:"1"},{default:r(()=>[w("Type 1")]),_:1}),s(l,{label:"Type 2",value:"2"},{default:r(()=>[w("Type 2")]),_:1})]),_:1},8,["modelValue"])]),_:1})]),e("div",Ae,[De,s(o,{prop:"hardwareVersions"},{default:r(()=>[s(y,{modelValue:t.targetData.hardwareVersions,"onUpdate:modelValue":a[4]||(a[4]=n=>t.targetData.hardwareVersions=n),multiple:"",filterable:"","allow-create":"","default-first-option":"",placeholder:"Choose tags for your target","value-key":"name"},{default:r(()=>[s(l,{label:"TPS388",value:{name:"TPS388"}}),s(l,{label:"e-BioKECpro",value:{name:"e-BioKECpro"}}),s(l,{label:"TPS900",value:{name:"TPS900"}})]),_:1},8,["modelValue"])]),_:1})]),e("div",Be,[Pe,s(o,{prop:"file"},{default:r(()=>[e("input",{type:"file",class:"form-control",onChange:a[5]||(a[5]=(...n)=>t.handleFileChange&&t.handleFileChange(...n))},null,32)]),_:1})]),e("div",qe,[Ue,e("button",{"data-kt-indicator":t.loading?"on":null,class:"btn btn-lg btn-primary",type:"submit"},[t.loading?N("",!0):(v(),g("span",ze,[w(" Submit "),s(p,{"icon-name":"arrow-right","icon-class":"fs-3 ms-2 me-0"})])),t.loading?(v(),g("span",Me,[w(" Please wait... "),Ke])):N("",!0)],8,Fe)])]),_:1},8,["model","rules"])])])])],512)}const Re=S(pe,[["render",je]]),Ie=T({name:"dashboard-main",components:{VersionsTable:fe,VersionCreate:Re}}),Ee={class:"row g-5 g-xl-8 h-100"};function Oe(t,a,m,u,d,f){const p=i("VersionsTable"),c=i("VersionCreate");return v(),g(A,null,[e("div",Ee,[s(p,{"widget-classes":""})]),s(c)],64)}const Xe=S(Ie,[["render",Oe]]);export{Xe as default};
